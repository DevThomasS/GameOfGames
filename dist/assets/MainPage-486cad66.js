var W=Object.defineProperty;var Q=(e,n,t)=>n in e?W(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var d=(e,n,t)=>(Q(e,typeof n!="symbol"?n+"":n,t),t);import{F as l,d as R,_ as L,o as _,c as b,w as a,a as i,V as P,b as U,e as F,r as O,f as V,g as B,n as N,h,i as z,j as J,k as w,l as S,t as v,m as G,p as y,q as Z,s as j,v as K,u as D,x as $,y as q,z as X}from"./index-f82bfa89.js";import{D as C}from"./Expansions-0aeea0bd.js";class m{constructor(n,t,s){d(this,"faction");d(this,"loaded");d(this,"color");d(this,"image_url");d(this,"data");this.faction=n,this.loaded=!1,this.color=t,this.image_url=s,this.data=new k(n,c.Unknown,0,0,c.Unknown,0,c.Unknown,l.Unknown,[])}static getFactions(){return[new m(l.Atreides,"rgba( 0, 255, 0, 0.05 )",new URL("/GameOfGames/assets/Atreides-559fab5c.png",self.location).href),new m(l.BeneGesserit,"rgba( 0, 0, 255, 0.05 )",new URL("/GameOfGames/assets/BeneGesserit-a70f6147.png",self.location).href),new m(l.Emperor,"rgba( 255, 0, 0, 0.05 )",new URL("/GameOfGames/assets/Emperor-e85c38c2.png",self.location).href),new m(l.Fremen,"rgba( 255, 255, 0, 0.05 )",new URL("/GameOfGames/assets/Fremen-bedc8e68.png",self.location).href),new m(l.Harkonnen,"rgba( 0, 0, 0, 0.05 )",new URL("/GameOfGames/assets/Harkonnen-8980669d.png",self.location).href),new m(l.SpacingGuild,"rgba( 255, 110, 0, 0.05 )",new URL("/GameOfGames/assets/SpacingGuild-1948f1ca.png",self.location).href),new m(l.Ixians,"rgba( 200, 190, 120, 0.05 )",new URL("/GameOfGames/assets/Ixians-fd33647c.png",self.location).href),new m(l.Tleilaxu,"rgba( 130, 0, 200, 0.05 )",new URL("/GameOfGames/assets/Tleilaxu-b169d45b.png",self.location).href),new m(l.CHOAM,"rgba( 0, 0, 0, 0 )",new URL("/GameOfGames/assets/CHOAM-38777541.png",self.location).href),new m(l.Richese,"rgba( 255, 255, 255, 0.05 )",new URL("/GameOfGames/assets/Richese-8e49c515.png",self.location).href),new m(l.Ecaz,"rgba( 200, 0, 130, 0.05 )",new URL("/GameOfGames/assets/Ecaz-9fa8b699.png",self.location).href),new m(l.Moritani,"rgba( 0, 180, 255, 0.05 )",new URL("/GameOfGames/assets/Moritani-97fc141c.png",self.location).href)]}}class k{constructor(n,t,s,r,u,o,g,H,E){d(this,"faction");d(this,"person");d(this,"usage_rate");d(this,"win_rate");d(this,"champion");d(this,"average_game_length");d(this,"adversary");d(this,"rival_house");d(this,"seat_rates");this.faction=n,this.person=t,this.usage_rate=s,this.win_rate=r,this.champion=u,this.average_game_length=o,this.adversary=g,this.rival_house=H,this.seat_rates=E}static getFactionStatistics(n,t){const s=n.filter(o=>o.players.find(g=>g.faction===t)),r=this.getFactionWins(s,t),u=this.getFactionDefeats(s,t);return new k(t,c.Unknown,(s.length||0)/(n.length||1),(r.length||0)/(s.length||1),this.getMaxPerson(r),(s.reduce((o,g)=>o+g.end_turn,0)||0)/(s.length||1),this.getMaxPerson(u),this.getMaxFaction(u),[])}static getPersonStatistics(n,t){if(t===c.Unknown)return this.getUnknownPersonStatistics(n);const s=n.filter(o=>o.players.find(g=>g.person===t)),r=this.getPersonWins(s,t),u=this.getPersonDefeats(s,t);return new k(l.Unknown,t,s.length,(r.length||0)/(s.length||1),this.getMaxFaction(r),(s.reduce((o,g)=>o+g.end_turn,0)||0)/(s.length||1),this.getMaxPerson(u),this.getMaxFaction(u),[])}static getUnknownPersonStatistics(n){return new k(l.Unknown,c.Unknown,n.length,0,this.getMaxFaction(n),(n.reduce((t,s)=>t+s.end_turn,0)||0)/(n.length||1),c.Unknown,l.Unknown,this.getSeatRates(n))}static getFactionWins(n,t){return n.filter(s=>s.players.find(r=>A.includes(r.victory_type)&&r.faction===t))}static getFactionDefeats(n,t){return n.filter(s=>s.players.find(r=>!A.includes(r.victory_type)&&r.faction===t))}static getMaxPerson(n){const t=[{person:c.Unknown,victories:0}];for(const s of n){const r=s.players.filter(u=>A.includes(u.victory_type));for(const u of r){const o=t.find(g=>g.person===u.person);o?o.victories++:t.push({person:u.person,victories:1})}}return t.reduce((s,r)=>r.victories>s.victories?r:s).person}static getMaxFaction(n){const t=[{faction:l.Unknown,victories:0}];for(const s of n){const r=s.players.filter(u=>A.includes(u.victory_type));for(const u of r){const o=t.find(g=>g.faction===u.faction);o?o.victories++:t.push({faction:u.faction,victories:1})}}return t.reduce((s,r)=>r.victories>s.victories?r:s).faction}static getPersonWins(n,t){return n.filter(s=>s.players.find(r=>A.includes(r.victory_type)&&r.person===t))}static getPersonDefeats(n,t){return n.filter(s=>s.players.find(r=>!A.includes(r.victory_type)&&r.person===t))}static getSeatRates(n){const t=[0,0,0,0,0,0];for(const s of n){const r=s.players.filter(u=>A.includes(u.victory_type));for(const u of r)t[u.seat_position-1]++}return t}}class x{constructor(n,t,s,r,u,o){d(this,"game_id");d(this,"end_turn");d(this,"players");d(this,"components");d(this,"duration");d(this,"location");this.game_id=n,this.end_turn=t,this.players=s,this.components=r,this.duration=u,this.location=o}static getGameByGameId(n){const t=this.getAllGames().find(s=>s.game_id===n);return t||new x(-1,-1,[],[],-1,M.Unknown)}static getGamesByLocation(n){return this.getAllGames().filter(t=>t.location===n)}static getGamesByNumberOfPlayers(n){return this.getAllGames().filter(t=>t.players.length===n)}static getAllGames(){return[new x(0,10,f.getPlayersByGameId(0),C.getComponentsByQuery([],[4,11,15]),8,M.Chicago),new x(1,5,f.getPlayersByGameId(1),C.getComponentsByQuery([2,51],[]),3,M.Chicago),new x(2,8,f.getPlayersByGameId(2),C.getComponentsByQuery([],[13]),9,M.Madison)]}}class I{constructor(n){d(this,"person");d(this,"loaded");d(this,"data");this.person=n,this.loaded=!1,this.data=new k(l.Unknown,c.Unknown,0,0,c.Unknown,0,c.Unknown,l.Unknown,[])}static getPeople(){const n=[];for(const t of Object.values(c))n.push(new I(t));return n}}class f{constructor(n,t,s,r,u){d(this,"person");d(this,"game_id");d(this,"faction");d(this,"seat_position");d(this,"victory_type");this.game_id=n,this.seat_position=t,this.person=s,this.faction=r,this.victory_type=u}static getPlayersByGameId(n){return this.getAllPlayers().filter(t=>t.game_id===n)}static getPlayersByPersonId(n){return this.getAllPlayers().filter(t=>t.person===n)}static getAllPlayers(){return[new f(0,1,c.ThomasS,l.Moritani,p.Defeat),new f(0,2,c.ChrisS,l.Harkonnen,p.SandTroutSolo),new f(0,3,c.AmandaS,l.Fremen,p.Defeat),new f(0,4,c.TomS,l.Emperor,p.Defeat),new f(0,5,c.AliciaS,l.Atreides,p.Defeat),new f(0,6,c.KenS,l.SpacingGuild,p.Defeat),new f(1,1,c.JackI,l.SpacingGuild,p.Alliance),new f(1,2,c.ZakA,l.Atreides,p.Defeat),new f(1,3,c.TeddyI,l.Fremen,p.Alliance),new f(1,4,c.ZachH,l.BeneGesserit,p.Defeat),new f(1,5,c.LoganR,l.Harkonnen,p.Defeat),new f(2,1,c.ThomasS,l.Richese,p.Defeat),new f(2,2,c.ChrisS,l.BeneGesserit,p.Defeat),new f(2,3,c.NathanW,l.CHOAM,p.Defeat),new f(2,4,c.ElizabethS,l.Emperor,p.SandTroutSolo),new f(2,5,c.MeganW,l.Fremen,p.SandTroutDefeat),new f(2,6,c.AmandaS,l.Harkonnen,p.Defeat),new f(2,7,c.FrScott,l.SpacingGuild,p.Defeat),new f(2,8,c.JoeS,l.Moritani,p.Defeat)]}}var M=(e=>(e.Lincoln="Lincoln, NE",e.Chicago="Chicago, IL",e.Madison="Madison, WI",e.Unknown="Unknown",e))(M||{}),c=(e=>(e.AliciaS="Alicia S",e.AmandaS="Amanda S",e.ChrisS="Chris S",e.KenS="Ken S",e.ThomasS="Thomas S",e.TomS="Tom S",e.JackI="Jack i",e.TeddyI="Teddy i",e.ZachH="Zach H",e.ZakA="Zak Ben A",e.LoganR="Logan R",e.NathanW="Nathan W",e.ElizabethS="Elizabeth S",e.MeganW="Megan W",e.FrScott="Father Scott",e.JoeS="Joe S",e.Unknown="n/a",e))(c||{}),p=(e=>(e.Alliance="Alliance Victory",e.Betrayed="Betrayed Defeat",e.Betrayal="Betrayal Victory",e.Defeat="Defeat",e.MultiAlliance="Multi Alliance Victory",e.PredictedDefeat="Predicted Defeat",e.SandTroutDefeat="Sand Trout Defeat",e.SandTroutSolo="Sand Trout Solo",e.SpecialBeneGesserit="Bene Gesserit Prediction",e.SpecialFremen="Fremen Special",e.SpecialSpacingGuild="Spacing Guild Special",e.TrueSolo="True Solo",e))(p||{});const A=["Alliance Victory","Betrayal Victory","Multi Alliance Victory","Sand Trout Solo","Bene Gesserit Prediction","Fremen Special","Spacing Guild Special","True Solo"],Y=R({data(){return{factionData:m.getFactions(),allGames:x.getAllGames()}},methods:{loadFactionData(e){const n=this.factionData.findIndex(t=>t.faction===e);n!==-1&&(this.factionData[n].data=k.getFactionStatistics(this.allGames,e),this.factionData[n].loaded=!0)},truncateAverageGameLength(e){return e===0?"n/a":(Math.round(e*Math.pow(10,2))/Math.pow(10,2)).toString()}}});const ee={class:"faction-content"},te={class:"panel-container"},ne={class:"icon-container"},ae=["src"];function se(e,n,t,s,r,u){return _(),b(Z,{multiple:""},{default:a(()=>[i(P,null,{default:a(()=>[(_(!0),U(F,null,O(e.factionData,o=>(_(),b(V,{key:o.faction,cols:"6"},{default:a(()=>[i(B,{color:o.color,class:N({"choam-card":o.faction==="CHOAM"})},{default:a(()=>[h("div",ee,[h("div",te,[i(z,{title:o.faction,class:"transparent-panel h2-text",onClick:g=>o.loaded?null:e.loadFactionData(o.faction)},{default:a(()=>[i(J,{class:"panel-text"},{default:a(()=>[i(P,null,{default:a(()=>[i(w,null,{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(Math.round(o.data.usage_rate*100))+"%",1)]),_:2},1024),i(G,{class:"subtitle-text"},{default:a(()=>[y("Usage Rate")]),_:1})]),_:2},1024),i(w,null,{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(Math.round(o.data.win_rate*100))+"%",1)]),_:2},1024),i(G,{class:"subtitle-text"},{default:a(()=>[y("Win Rate")]),_:1})]),_:2},1024),i(w,null,{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(o.data.champion),1)]),_:2},1024),i(G,{class:"subtitle-text"},{default:a(()=>[y("Champion")]),_:1})]),_:2},1024),i(w,null,{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v("Turn: "+e.truncateAverageGameLength(o.data.average_game_length)),1)]),_:2},1024),i(G,{class:"subtitle-text"},{default:a(()=>[y("Average Game Length")]),_:1})]),_:2},1024),i(w,null,{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(o.data.adversary),1)]),_:2},1024),i(G,{class:"subtitle-text"},{default:a(()=>[y("Adversary")]),_:1})]),_:2},1024),i(w,null,{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(o.data.rival_house),1)]),_:2},1024),i(G,{class:"subtitle-text"},{default:a(()=>[y("Rival House")]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","onClick"])]),h("div",ne,[h("img",{src:o.image_url,class:"faction-icon"},null,8,ae)])])]),_:2},1032,["color","class"])]),_:2},1024))),128))]),_:1})]),_:1})}const ie=L(Y,[["render",se],["__scopeId","data-v-22812962"]]),oe=R({data(){return{searchQuery:"",peopleData:I.getPeople(),selectedPerson:new I(c.Unknown),allGames:x.getAllGames()}},mounted(){const e=this.peopleData.findIndex(n=>n.person==="n/a");this.peopleData[e].data=k.getPersonStatistics(this.allGames,this.peopleData[e].person),this.selectedPerson=this.peopleData[e]},computed:{filteredPlayers(){const e=this.peopleData.filter(n=>n.person.toLowerCase().includes(this.searchQuery.toLowerCase()));return e.length<Object.values(c).length?e:[]}},methods:{searchPlayer(e){const n=this.peopleData.find(t=>t.person===e);if(n===void 0){const t=this.peopleData.findIndex(s=>s.person==="n/a");this.selectedPerson=this.peopleData[t]}else{const t=this.peopleData.findIndex(s=>s.person.includes(n.person));t!==-1?this.peopleData[t].loaded?this.selectedPerson===this.peopleData[t]?this.clearSearch():(this.selectedPerson=this.peopleData[t],this.searchQuery=this.peopleData[t].person):(this.peopleData[t].data=k.getPersonStatistics(this.allGames,this.peopleData[t].person),this.peopleData[t].loaded=!0,this.selectedPerson=this.peopleData[t],this.searchQuery=this.peopleData[t].person):this.clearSearch()}},clearSearch(){this.searchQuery="";const e=this.peopleData.findIndex(n=>n.person==="n/a");this.selectedPerson=this.peopleData[e]},truncateAverageGameLength(e){return e===0?"n/a":(Math.round(e*Math.pow(10,2))/Math.pow(10,2)).toString()}}});const re={class:"search-panel"},le={key:0},ce={key:0},de={key:0},ue={class:"selected-person"};function fe(e,n,t,s,r,u){return _(),b(B,{class:"player-card h2-text"},{default:a(()=>[h("div",re,[j(h("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=o=>e.searchQuery=o),placeholder:"Search player..."},null,512),[[K,e.searchQuery]]),e.selectedPerson?(_(),U("div",le,[e.filteredPlayers.length>0?(_(),U("div",ce,[i(P,null,{default:a(()=>[(_(!0),U(F,null,O(e.filteredPlayers,o=>(_(),b(B,{class:"filtered-person h2-text",key:o.person,onClick:g=>e.searchPlayer(o.person)},{default:a(()=>[e.selectedPerson.person!=="n/a"&&e.searchQuery!==""?(_(),U("button",de," X ")):D("",!0),i(w,null,{default:a(()=>[i(S,null,{default:a(()=>[y(v(o.person),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):D("",!0)])):D("",!0)]),h("div",ue,[i(P,null,{default:a(()=>[i(w,null,{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(e.selectedPerson.data.usage_rate),1)]),_:1}),i(G,{class:"subtitle-text"},{default:a(()=>[y("Number of Games")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(_(),b(w,{key:0},{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(Math.round(e.selectedPerson.data.win_rate*100))+"%",1)]),_:1}),i(G,{class:"subtitle-text"},{default:a(()=>[y("Win Rate")]),_:1})]),_:1})):D("",!0),i(w,null,{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(e.selectedPerson.data.champion),1)]),_:1}),i(G,{class:"subtitle-text"},{default:a(()=>[y("Best Faction")]),_:1})]),_:1}),i(w,null,{default:a(()=>[i(S,{class:"truncate-decimal"},{default:a(()=>[h("div",null,v("Turn: "+e.truncateAverageGameLength(e.selectedPerson.data.average_game_length)),1)]),_:1}),i(G,{class:"subtitle-text"},{default:a(()=>[y("Average Game Length")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(_(),b(w,{key:1},{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(e.selectedPerson.data.adversary),1)]),_:1}),i(G,{class:"subtitle-text"},{default:a(()=>[y("Adversary")]),_:1})]),_:1})):D("",!0),e.selectedPerson.person!=="n/a"?(_(),b(w,{key:2},{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(e.selectedPerson.data.rival_house),1)]),_:1}),i(G,{class:"subtitle-text"},{default:a(()=>[y("Rival House")]),_:1})]),_:1})):D("",!0),e.selectedPerson.person==="n/a"?(_(),b(w,{key:3},{default:a(()=>[i(S,null,{default:a(()=>[h("div",null,v(e.selectedPerson.data.seat_rates),1)]),_:1}),i(G,{class:"subtitle-text"},{default:a(()=>[y("Seat Win Rate")]),_:1})]),_:1})):D("",!0)]),_:1})])]),_:1})}const he=L(oe,[["render",fe],["__scopeId","data-v-0890b772"]]),pe=R({components:{FactionStatistics:ie,SearchPanel:he}});const T=e=>(q("data-v-014fcabe"),e=e(),X(),e),ge={class:"default-page"},me={class:"dune-box"},_e=T(()=>h("h2",{class:"h2-text"}," Player Standings ",-1)),we=T(()=>h("h2",{class:"h2-text"}," House Standings ",-1));function Se(e,n,t,s,r,u){const o=$("SearchPanel"),g=$("FactionStatistics");return _(),U("div",ge,[h("div",me,[i(P,{class:"centered-row"},{default:a(()=>[_e,i(o),we,i(g)]),_:1})])])}const ke=L(pe,[["render",Se],["__scopeId","data-v-014fcabe"]]);export{ke as default};
