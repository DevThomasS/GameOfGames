var W=Object.defineProperty;var Q=(e,t,n)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var f=(e,t,n)=>(Q(e,typeof t!="symbol"?t+"":t,n),n);import{F as c}from"./Factions-d3b9fb41.js";import{D as C}from"./Expansions-94880303.js";import{d as R,_ as B,o as _,c as k,w as s,a as o,b as D,F as $,r as O,n as N,e as p,t as S,f as w,g as T,v as V,h as b,i as L,p as z,j as J}from"./index-bee8bcf5.js";import{V as I,a as Z,b as j,c as K,d as v,e as y,f as G,g as X}from"./VListItem-fad8a2e1.js";import{V as F}from"./VCard-99562935.js";class m{constructor(t,n,i){f(this,"faction");f(this,"loaded");f(this,"color");f(this,"image_url");f(this,"data");this.faction=t,this.loaded=!1,this.color=n,this.image_url=i,this.data=new A(t,u.Unknown,0,0,u.Unknown,0,u.Unknown,c.Unknown,[])}static getFactions(){return[new m(c.Atreides,"rgba( 0, 255, 0, 0.05 )",new URL("/GameOfGames/assets/Atreides-559fab5c.png",self.location).href),new m(c.BeneGesserit,"rgba( 0, 0, 255, 0.05 )",new URL("/GameOfGames/assets/BeneGesserit-a70f6147.png",self.location).href),new m(c.Emperor,"rgba( 255, 0, 0, 0.05 )",new URL("/GameOfGames/assets/Emperor-e85c38c2.png",self.location).href),new m(c.Fremen,"rgba( 255, 255, 0, 0.05 )",new URL("/GameOfGames/assets/Fremen-bedc8e68.png",self.location).href),new m(c.Harkonnen,"rgba( 0, 0, 0, 0.05 )",new URL("/GameOfGames/assets/Harkonnen-8980669d.png",self.location).href),new m(c.SpacingGuild,"rgba( 255, 110, 0, 0.05 )",new URL("/GameOfGames/assets/SpacingGuild-1948f1ca.png",self.location).href),new m(c.Ixians,"rgba( 200, 190, 120, 0.05 )",new URL("/GameOfGames/assets/Ixians-fd33647c.png",self.location).href),new m(c.Tleilaxu,"rgba( 130, 0, 200, 0.05 )",new URL("/GameOfGames/assets/Tleilaxu-b169d45b.png",self.location).href),new m(c.CHOAM,"rgba( 0, 0, 0, 0 )",new URL("/GameOfGames/assets/CHOAM-38777541.png",self.location).href),new m(c.Richese,"rgba( 255, 255, 255, 0.05 )",new URL("/GameOfGames/assets/Richese-8e49c515.png",self.location).href),new m(c.Ecaz,"rgba( 200, 0, 130, 0.05 )",new URL("/GameOfGames/assets/Ecaz-9fa8b699.png",self.location).href),new m(c.Moritani,"rgba( 0, 180, 255, 0.05 )",new URL("/GameOfGames/assets/Moritani-97fc141c.png",self.location).href)]}}class A{constructor(t,n,i,d,r,l,g,U,E){f(this,"faction");f(this,"person");f(this,"usage_rate");f(this,"win_rate");f(this,"champion");f(this,"average_game_length");f(this,"adversary");f(this,"rival_house");f(this,"seat_rates");this.faction=t,this.person=n,this.usage_rate=i,this.win_rate=d,this.champion=r,this.average_game_length=l,this.adversary=g,this.rival_house=U,this.seat_rates=E}static getFactionStatistics(t,n){const i=t.filter(l=>l.players.find(g=>g.faction===n)),d=this.getFactionWins(i,n),r=this.getFactionDefeats(i,n);return new A(n,u.Unknown,(i.length||0)/(t.length||1),(d.length||0)/(i.length||1),this.getMaxPerson(d),(i.reduce((l,g)=>l+g.end_turn,0)||0)/(i.length||1),this.getMaxPerson(r),this.getMaxFaction(r),[])}static getPersonStatistics(t,n){if(n===u.Unknown)return this.getUnknownPersonStatistics(t);const i=t.filter(l=>l.players.find(g=>g.person===n)),d=this.getPersonWins(i,n),r=this.getPersonDefeats(i,n);return new A(c.Unknown,n,i.length,(d.length||0)/(i.length||1),this.getMaxFaction(d),(i.reduce((l,g)=>l+g.end_turn,0)||0)/(i.length||1),this.getMaxPerson(r),this.getMaxFaction(r),[])}static getUnknownPersonStatistics(t){return new A(c.Unknown,u.Unknown,t.length,0,this.getMaxFaction(t),(t.reduce((n,i)=>n+i.end_turn,0)||0)/(t.length||1),u.Unknown,c.Unknown,this.getSeatRates(t))}static getFactionWins(t,n){const i=[a.Alliance,a.MultiAlliance,a.Solo,a.SpecialFremen,a.SpecialSpacingGuild];return t.filter(d=>d.players.find(r=>i.includes(r.victory_type)&&r.faction===n))}static getFactionDefeats(t,n){const i=[a.Alliance,a.MultiAlliance,a.Solo,a.SpecialFremen,a.SpecialSpacingGuild];return t.filter(d=>d.players.find(r=>!i.includes(r.victory_type)&&r.faction===n))}static getMaxPerson(t){const n=[a.Alliance,a.MultiAlliance,a.Solo,a.SpecialFremen,a.SpecialSpacingGuild],i=[{person:u.Unknown,victories:0}];for(const d of t){const r=d.players.filter(l=>n.includes(l.victory_type));for(const l of r){const g=i.find(U=>U.person===l.person);g?g.victories++:i.push({person:l.person,victories:1})}}return i.reduce((d,r)=>r.victories>d.victories?r:d).person}static getMaxFaction(t){const n=[a.Alliance,a.MultiAlliance,a.Solo,a.SpecialFremen,a.SpecialSpacingGuild],i=[{faction:c.Unknown,victories:0}];for(const d of t){const r=d.players.filter(l=>n.includes(l.victory_type));for(const l of r){const g=i.find(U=>U.faction===l.faction);g?g.victories++:i.push({faction:l.faction,victories:1})}}return i.reduce((d,r)=>r.victories>d.victories?r:d).faction}static getPersonWins(t,n){const i=[a.Alliance,a.MultiAlliance,a.Solo,a.SpecialFremen,a.SpecialSpacingGuild];return t.filter(d=>d.players.find(r=>i.includes(r.victory_type)&&r.person===n))}static getPersonDefeats(t,n){const i=[a.Alliance,a.MultiAlliance,a.Solo,a.SpecialFremen,a.SpecialSpacingGuild];return t.filter(d=>d.players.find(r=>!i.includes(r.victory_type)&&r.person===n))}static getSeatRates(t){const n=[a.Alliance,a.MultiAlliance,a.Solo,a.SpecialFremen,a.SpecialSpacingGuild],i=[0,0,0,0,0,0];for(const d of t){const r=d.players.filter(l=>n.includes(l.victory_type));for(const l of r)i[l.seat_position-1]++}return i}}class M{constructor(t,n,i,d,r,l){f(this,"game_id");f(this,"end_turn");f(this,"players");f(this,"components");f(this,"duration");f(this,"location");this.game_id=t,this.end_turn=n,this.players=i,this.components=d,this.duration=r,this.location=l}static getGameByGameId(t){const n=this.getAllGames().find(i=>i.game_id===t);return n||new M(-1,-1,[],[],-1,x.Unknown)}static getGamesByLocation(t){return this.getAllGames().filter(n=>n.location===t)}static getGamesByNumberOfPlayers(t){return this.getAllGames().filter(n=>n.players.length===t)}static getAllGames(){return[new M(0,10,h.getPlayersByGameId(0),C.getComponentsByQuery([],[4,11,15]),8,x.Chicago),new M(1,5,h.getPlayersByGameId(1),C.getComponentsByQuery([2,51],[]),3,x.Chicago),new M(2,8,h.getPlayersByGameId(2),C.getComponentsByQuery([],[13]),9,x.Madison)]}}class P{constructor(t){f(this,"person");f(this,"loaded");f(this,"data");this.person=t,this.loaded=!1,this.data=new A(c.Unknown,u.Unknown,0,0,u.Unknown,0,u.Unknown,c.Unknown,[])}static getPeople(){const t=[];for(const n of Object.values(u))t.push(new P(n));return t}}class h{constructor(t,n,i,d,r){f(this,"person");f(this,"game_id");f(this,"faction");f(this,"seat_position");f(this,"victory_type");this.game_id=t,this.seat_position=n,this.person=i,this.faction=d,this.victory_type=r}static getPlayersByGameId(t){return this.getAllPlayers().filter(n=>n.game_id===t)}static getPlayersByPersonId(t){return this.getAllPlayers().filter(n=>n.person===t)}static getAllPlayers(){return[new h(0,1,u.ThomasS,c.Moritani,a.Defeat),new h(0,2,u.ChrisS,c.Harkonnen,a.Solo),new h(0,3,u.AmandaS,c.Fremen,a.Defeat),new h(0,4,u.TomS,c.Emperor,a.Defeat),new h(0,5,u.AliciaS,c.Atreides,a.Defeat),new h(0,6,u.KenS,c.SpacingGuild,a.Defeat),new h(1,1,u.JackI,c.SpacingGuild,a.Alliance),new h(1,2,u.ZakA,c.Atreides,a.Defeat),new h(1,3,u.TeddyI,c.Fremen,a.Alliance),new h(1,4,u.ZachH,c.BeneGesserit,a.Defeat),new h(1,5,u.LoganR,c.Harkonnen,a.Defeat),new h(2,1,u.ThomasS,c.Richese,a.Defeat),new h(2,2,u.ChrisS,c.BeneGesserit,a.Defeat),new h(2,3,u.NathanW,c.CHOAM,a.Defeat),new h(2,4,u.ElizabethS,c.Emperor,a.Solo),new h(2,5,u.MeganW,c.Fremen,a.Defeat),new h(2,6,u.AmandaS,c.Harkonnen,a.Defeat),new h(2,7,u.FrScott,c.SpacingGuild,a.Defeat),new h(2,8,u.JoeS,c.Moritani,a.Defeat)]}}var x=(e=>(e.Lincoln="Lincoln, NE",e.Chicago="Chicago, IL",e.Madison="Madison, WI",e.Unknown="Unknown",e))(x||{}),u=(e=>(e.AliciaS="Alicia S",e.AmandaS="Amanda S",e.ChrisS="Chris S",e.KenS="Ken S",e.ThomasS="Thomas S",e.TomS="Tom S",e.JackI="Jack i",e.TeddyI="Teddy i",e.ZachH="Zach H",e.ZakA="Zak Ben A",e.LoganR="Logan R",e.NathanW="Nathan W",e.ElizabethS="Elizabeth S",e.MeganW="Megan W",e.FrScott="Father Scott",e.JoeS="Joe S",e.Unknown="n/a",e))(u||{}),a=(e=>(e.Alliance="Alliance",e.BetrayedDefeat="Betrayed Defeat",e.BetrayalVictory="Betrayal Victory",e.Defeat="Defeat",e.MultiAlliance="MultiAlliance",e.PredictedDefeat="Predicted Defeat",e.Solo="Solo",e.SpecialBeneGesserit="Special Bene Gesserit",e.SpecialFremen="Special Fremen",e.SpecialSpacingGuild="Special Spacing Guild",e))(a||{});const q=R({data(){return{factionData:m.getFactions(),allGames:M.getAllGames()}},methods:{loadFactionData(e){const t=this.factionData.findIndex(n=>n.faction===e);t!==-1&&(this.factionData[t].data=A.getFactionStatistics(this.allGames,e),this.factionData[t].loaded=!0)},truncateAverageGameLength(e){return e===0?"n/a":(Math.round(e*Math.pow(10,2))/Math.pow(10,2)).toString()}}});const Y={class:"faction-content"},ee={class:"panel-container"},te={class:"icon-container"},ne=["src"];function ae(e,t,n,i,d,r){return _(),k(X,{multiple:""},{default:s(()=>[o(I,null,{default:s(()=>[(_(!0),D($,null,O(e.factionData,l=>(_(),k(Z,{key:l.faction,cols:"6"},{default:s(()=>[o(F,{color:l.color,class:N({"choam-card":l.faction==="CHOAM"})},{default:s(()=>[p("div",Y,[p("div",ee,[o(j,{title:l.faction,class:"transparent-panel h2-text",onClick:g=>l.loaded?null:e.loadFactionData(l.faction)},{default:s(()=>[o(K,{class:"panel-text"},{default:s(()=>[o(I,null,{default:s(()=>[o(v,null,{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(Math.round(l.data.usage_rate*100))+"%",1)]),_:2},1024),o(G,{class:"subtitle-text"},{default:s(()=>[w("Usage Rate")]),_:1})]),_:2},1024),o(v,null,{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(Math.round(l.data.win_rate*100))+"%",1)]),_:2},1024),o(G,{class:"subtitle-text"},{default:s(()=>[w("Win Rate")]),_:1})]),_:2},1024),o(v,null,{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(l.data.champion),1)]),_:2},1024),o(G,{class:"subtitle-text"},{default:s(()=>[w("Champion")]),_:1})]),_:2},1024),o(v,null,{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S("Turn: "+e.truncateAverageGameLength(l.data.average_game_length)),1)]),_:2},1024),o(G,{class:"subtitle-text"},{default:s(()=>[w("Average Game Length")]),_:1})]),_:2},1024),o(v,null,{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(l.data.adversary),1)]),_:2},1024),o(G,{class:"subtitle-text"},{default:s(()=>[w("Adversary")]),_:1})]),_:2},1024),o(v,null,{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(l.data.rival_house),1)]),_:2},1024),o(G,{class:"subtitle-text"},{default:s(()=>[w("Rival House")]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","onClick"])]),p("div",te,[p("img",{src:l.image_url,class:"faction-icon"},null,8,ne)])])]),_:2},1032,["color","class"])]),_:2},1024))),128))]),_:1})]),_:1})}const se=B(q,[["render",ae],["__scopeId","data-v-717d7ec0"]]),ie=R({data(){return{searchQuery:"",peopleData:P.getPeople(),selectedPerson:new P(u.Unknown),allGames:M.getAllGames()}},mounted(){const e=this.peopleData.findIndex(t=>t.person==="n/a");this.peopleData[e].data=A.getPersonStatistics(this.allGames,this.peopleData[e].person),this.selectedPerson=this.peopleData[e]},computed:{filteredPlayers(){const e=this.peopleData.filter(t=>t.person.toLowerCase().includes(this.searchQuery.toLowerCase()));return e.length<Object.values(u).length?e:[]}},methods:{searchPlayer(e){const t=this.peopleData.find(n=>n.person===e);if(t===void 0){const n=this.peopleData.findIndex(i=>i.person==="n/a");this.selectedPerson=this.peopleData[n]}else{const n=this.peopleData.findIndex(i=>i.person.includes(t.person));n!==-1?this.peopleData[n].loaded?this.selectedPerson===this.peopleData[n]?this.clearSearch():(this.selectedPerson=this.peopleData[n],this.searchQuery=this.peopleData[n].person):(this.peopleData[n].data=A.getPersonStatistics(this.allGames,this.peopleData[n].person),this.peopleData[n].loaded=!0,this.selectedPerson=this.peopleData[n],this.searchQuery=this.peopleData[n].person):this.clearSearch()}},clearSearch(){this.searchQuery="";const e=this.peopleData.findIndex(t=>t.person==="n/a");this.selectedPerson=this.peopleData[e]},truncateAverageGameLength(e){return e===0?"n/a":(Math.round(e*Math.pow(10,2))/Math.pow(10,2)).toString()}}});const le={class:"search-panel"},oe={key:0},re={key:0},ce={key:0},de={class:"selected-person"};function ue(e,t,n,i,d,r){return _(),k(F,{class:"player-card h2-text"},{default:s(()=>[p("div",le,[T(p("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>e.searchQuery=l),placeholder:"Search player..."},null,512),[[V,e.searchQuery]]),e.selectedPerson?(_(),D("div",oe,[e.filteredPlayers.length>0?(_(),D("div",re,[o(I,null,{default:s(()=>[(_(!0),D($,null,O(e.filteredPlayers,l=>(_(),k(F,{class:"filtered-person h2-text",key:l.person,onClick:g=>e.searchPlayer(l.person)},{default:s(()=>[e.selectedPerson.person!=="n/a"&&e.searchQuery!==""?(_(),D("button",ce," X ")):b("",!0),o(v,null,{default:s(()=>[o(y,null,{default:s(()=>[w(S(l.person),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):b("",!0)])):b("",!0)]),p("div",de,[o(I,null,{default:s(()=>[o(v,null,{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(e.selectedPerson.data.usage_rate),1)]),_:1}),o(G,{class:"subtitle-text"},{default:s(()=>[w("Number of Games")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(_(),k(v,{key:0},{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(Math.round(e.selectedPerson.data.win_rate*100))+"%",1)]),_:1}),o(G,{class:"subtitle-text"},{default:s(()=>[w("Win Rate")]),_:1})]),_:1})):b("",!0),o(v,null,{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(e.selectedPerson.data.champion),1)]),_:1}),o(G,{class:"subtitle-text"},{default:s(()=>[w("Best Faction")]),_:1})]),_:1}),o(v,null,{default:s(()=>[o(y,{class:"truncate-decimal"},{default:s(()=>[p("div",null,S("Turn: "+e.truncateAverageGameLength(e.selectedPerson.data.average_game_length)),1)]),_:1}),o(G,{class:"subtitle-text"},{default:s(()=>[w("Average Game Length")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(_(),k(v,{key:1},{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(e.selectedPerson.data.adversary),1)]),_:1}),o(G,{class:"subtitle-text"},{default:s(()=>[w("Adversary")]),_:1})]),_:1})):b("",!0),e.selectedPerson.person!=="n/a"?(_(),k(v,{key:2},{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(e.selectedPerson.data.rival_house),1)]),_:1}),o(G,{class:"subtitle-text"},{default:s(()=>[w("Rival House")]),_:1})]),_:1})):b("",!0),e.selectedPerson.person==="n/a"?(_(),k(v,{key:3},{default:s(()=>[o(y,null,{default:s(()=>[p("div",null,S(e.selectedPerson.data.seat_rates),1)]),_:1}),o(G,{class:"subtitle-text"},{default:s(()=>[w("Seat Win Rate")]),_:1})]),_:1})):b("",!0)]),_:1})])]),_:1})}const fe=B(ie,[["render",ue],["__scopeId","data-v-516970b4"]]),he=R({components:{FactionStatistics:se,SearchPanel:fe}});const H=e=>(z("data-v-014fcabe"),e=e(),J(),e),pe={class:"default-page"},ge={class:"dune-box"},me=H(()=>p("h2",{class:"h2-text"}," Player Standings ",-1)),_e=H(()=>p("h2",{class:"h2-text"}," House Standings ",-1));function Se(e,t,n,i,d,r){const l=L("SearchPanel"),g=L("FactionStatistics");return _(),D("div",pe,[p("div",ge,[o(I,{class:"centered-row"},{default:s(()=>[me,o(l),_e,o(g)]),_:1})])])}const be=B(he,[["render",Se],["__scopeId","data-v-014fcabe"]]);export{be as default};
