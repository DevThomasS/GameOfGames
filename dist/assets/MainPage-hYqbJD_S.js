var W=Object.defineProperty;var Q=(e,n,t)=>n in e?W(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var u=(e,n,t)=>(Q(e,typeof n!="symbol"?n+"":n,t),t);import{F as i}from"./Factions-4QeL1nQW.js";import{D as B}from"./Expansions-8Su4_EZG.js";import{d as T,_ as P,o as w,c as U,w as a,F,n as V,t as S,a as g,b as r,e as _,r as H,f as x,v as z,g as N,h as b,i as $,p as J,j as Z}from"./index-Lkaub4ga.js";import{V as I,a as K,b as j,c as q,d as v,e as y,f as k,g as X}from"./VListItem-8agUhv4F.js";import{V as L}from"./VCard-8rFlyzED.js";class m{constructor(n,t,s){u(this,"faction");u(this,"loaded");u(this,"color");u(this,"image_url");u(this,"data");this.faction=n,this.loaded=!1,this.color=t,this.image_url=s,this.data=new G(n,l.Unknown,0,0,l.Unknown,0,l.Unknown,i.Unknown,[])}static getFactions(){return[new m(i.Atreides,"rgba( 0, 255, 0, 0.05 )",new URL("/GameOfGames/assets/Atreides-3P-dQzR_.png",import.meta.url).href),new m(i.BeneGesserit,"rgba( 0, 0, 255, 0.05 )",new URL("/GameOfGames/assets/BeneGesserit-03LS4aoO.png",import.meta.url).href),new m(i.Emperor,"rgba( 255, 0, 0, 0.05 )",new URL("/GameOfGames/assets/Emperor-WohKIglq.png",import.meta.url).href),new m(i.Fremen,"rgba( 255, 255, 0, 0.05 )",new URL("/GameOfGames/assets/Fremen-nA5vhvC8.png",import.meta.url).href),new m(i.Harkonnen,"rgba( 0, 0, 0, 0.05 )",new URL("/GameOfGames/assets/Harkonnen-U4LPhx-O.png",import.meta.url).href),new m(i.SpacingGuild,"rgba( 255, 110, 0, 0.05 )",new URL("/GameOfGames/assets/SpacingGuild-IL1zvpbT.png",import.meta.url).href),new m(i.Ixians,"rgba( 200, 190, 120, 0.05 )",new URL("/GameOfGames/assets/Ixians-eYszch7k.png",import.meta.url).href),new m(i.Tleilaxu,"rgba( 130, 0, 200, 0.05 )",new URL("/GameOfGames/assets/Tleilaxu-7vmw99ka.png",import.meta.url).href),new m(i.CHOAM,"rgba( 0, 0, 0, 0 )",new URL("/GameOfGames/assets/CHOAM-VtU5ofUh.png",import.meta.url).href),new m(i.Richese,"rgba( 255, 255, 255, 0.05 )",new URL("/GameOfGames/assets/Richese-LaG0PqEf.png",import.meta.url).href),new m(i.Ecaz,"rgba( 200, 0, 130, 0.05 )",new URL("/GameOfGames/assets/Ecaz-F7pBt7gC.png",import.meta.url).href),new m(i.Moritani,"rgba( 0, 180, 255, 0.05 )",new URL("/GameOfGames/assets/Moritani-pC17q5-D.png",import.meta.url).href)]}}class G{constructor(n,t,s,c,h,o,f,R,E){u(this,"faction");u(this,"person");u(this,"usage_rate");u(this,"win_rate");u(this,"champion");u(this,"average_game_length");u(this,"adversary");u(this,"rival_house");u(this,"seat_rates");this.faction=n,this.person=t,this.usage_rate=s,this.win_rate=c,this.champion=h,this.average_game_length=o,this.adversary=f,this.rival_house=R,this.seat_rates=E}static getFactionStatistics(n,t){const s=n.filter(o=>o.players.find(f=>f.faction===t)),c=this.getFactionWins(s,t),h=this.getFactionDefeats(s,t);return new G(t,l.Unknown,(s.length||0)/(n.length||1),(c.length||0)/(s.length||1),this.getMaxPerson(c),(s.reduce((o,f)=>o+f.end_turn,0)||0)/(s.length||1),this.getMaxPerson(h),this.getMaxFaction(h,l.Unknown),[])}static getPersonStatistics(n,t){if(t===l.Unknown)return this.getUnknownPersonStatistics(n);const s=n.filter(o=>o.players.find(f=>f.person===t)),c=this.getPersonWins(s,t),h=this.getPersonDefeats(s,t);return new G(i.Unknown,t,s.length,(c.length||0)/(s.length||1),this.getMaxFaction(c,t),(s.reduce((o,f)=>o+f.end_turn,0)||0)/(s.length||1),this.getMaxPerson(h),this.getMaxFaction(h,l.Unknown),[])}static getUnknownPersonStatistics(n){return new G(i.Unknown,l.Unknown,n.length,0,this.getMaxFaction(n,l.Unknown),(n.reduce((t,s)=>t+s.end_turn,0)||0)/(n.length||1),l.Unknown,i.Unknown,this.getSeatRates(n))}static getFactionWins(n,t){return n.filter(s=>s.players.find(c=>D.includes(c.victory_type)&&c.faction===t))}static getFactionDefeats(n,t){return n.filter(s=>s.players.find(c=>!D.includes(c.victory_type)&&c.faction===t))}static getMaxPerson(n){const t=[{person:l.Unknown,victories:0}];for(const s of n){const c=s.players.filter(h=>D.includes(h.victory_type));for(const h of c){const o=t.find(f=>f.person===h.person);o?o.victories++:t.push({person:h.person,victories:1})}}return t.reduce((s,c)=>c.victories>s.victories?c:s).person}static getMaxFaction(n,t){const s=[{faction:i.Unknown,victories:0}];let c=s.find(o=>o.faction===i.Unknown),h=[];for(const o of n){t===l.Unknown?h=o.players.filter(f=>D.includes(f.victory_type)):h=o.players.filter(f=>D.includes(f.victory_type)&&f.person===t);for(const f of h)c=s.find(R=>R.faction===f.faction),c?c.victories++:s.push({faction:f.faction,victories:1})}return s.reduce((o,f)=>f.victories>o.victories?f:o).faction}static getPersonWins(n,t){return n.filter(s=>s.players.find(c=>D.includes(c.victory_type)&&c.person===t))}static getPersonDefeats(n,t){return n.filter(s=>s.players.find(c=>!D.includes(c.victory_type)&&c.person===t))}static getSeatRates(n){const t=[0,0,0,0,0,0];for(const s of n){const c=s.players.filter(h=>D.includes(h.victory_type));for(const h of c)t[h.seat_position-1]++}return t}}class A{constructor(n,t,s,c,h,o){u(this,"game_id");u(this,"end_turn");u(this,"players");u(this,"components");u(this,"duration");u(this,"location");this.game_id=n,this.end_turn=t,this.players=s,this.components=c,this.duration=h,this.location=o}static getGameByGameId(n){const t=this.getAllGames().find(s=>s.game_id===n);return t||new A(-1,-1,[],[],-1,M.Unknown)}static getGamesByLocation(n){return this.getAllGames().filter(t=>t.location===n)}static getGamesByNumberOfPlayers(n){return this.getAllGames().filter(t=>t.players.length===n)}static getAllGames(){return[new A(0,10,d.getPlayersByGameId(0),B.getComponentsByQuery([],[4,11,15]),8,M.Chicago),new A(1,5,d.getPlayersByGameId(1),B.getComponentsByQuery([2,51],[]),3,M.Chicago),new A(2,8,d.getPlayersByGameId(2),B.getComponentsByQuery([],[13]),9,M.Madison),new A(3,10,d.getPlayersByGameId(3),B.getComponentsByQuery([50],[]),8,M.Madison)]}}class C{constructor(n){u(this,"person");u(this,"loaded");u(this,"data");this.person=n,this.loaded=!1,this.data=new G(i.Unknown,l.Unknown,0,0,l.Unknown,0,l.Unknown,i.Unknown,[])}static getPeople(){const n=[];for(const t of Object.values(l))n.push(new C(t));return n}}class d{constructor(n,t,s,c,h){u(this,"person");u(this,"game_id");u(this,"faction");u(this,"seat_position");u(this,"victory_type");this.game_id=n,this.seat_position=t,this.person=s,this.faction=c,this.victory_type=h}static getPlayersByGameId(n){return this.getAllPlayers().filter(t=>t.game_id===n)}static getPlayersByPersonId(n){return this.getAllPlayers().filter(t=>t.person===n)}static getAllPlayers(){return[new d(0,1,l.ThomasS,i.Moritani,p.Defeat),new d(0,2,l.ChrisS,i.Harkonnen,p.SandTroutSolo),new d(0,3,l.AmandaS,i.Fremen,p.Defeat),new d(0,4,l.TomS,i.Emperor,p.Defeat),new d(0,5,l.AliciaS,i.Atreides,p.Defeat),new d(0,6,l.KenS,i.SpacingGuild,p.Defeat),new d(1,1,l.JackI,i.SpacingGuild,p.Alliance),new d(1,2,l.ZakA,i.Atreides,p.Defeat),new d(1,3,l.TeddyI,i.Fremen,p.Alliance),new d(1,4,l.ZachH,i.BeneGesserit,p.Defeat),new d(1,5,l.LoganR,i.Harkonnen,p.Defeat),new d(2,1,l.ThomasS,i.Richese,p.Defeat),new d(2,2,l.ChrisS,i.BeneGesserit,p.Defeat),new d(2,3,l.NathanW,i.CHOAM,p.Defeat),new d(2,4,l.ElizabethS,i.Emperor,p.SandTroutSolo),new d(2,5,l.MeganW,i.Fremen,p.SandTroutDefeat),new d(2,6,l.AmandaS,i.Harkonnen,p.Defeat),new d(2,7,l.FrScott,i.SpacingGuild,p.Defeat),new d(2,8,l.JoeS,i.Moritani,p.Defeat),new d(3,1,l.ThomasS,i.Atreides,p.Defeat),new d(3,2,l.RyanH,i.Emperor,p.Defeat),new d(3,3,l.ChrisS,i.Harkonnen,p.SpecialSpacingGuild),new d(3,4,l.TheresaB,i.Tleilaxu,p.Defeat),new d(3,5,l.SarahH,i.SpacingGuild,p.SpecialSpacingGuild),new d(3,6,l.TylerM,i.Fremen,p.Defeat)]}}var M=(e=>(e.Lincoln="Lincoln, NE",e.Chicago="Chicago, IL",e.Madison="Madison, WI",e.Unknown="Unknown",e))(M||{}),l=(e=>(e.AliciaS="Alicia S",e.AmandaS="Amanda S",e.ChrisS="Chris S",e.KenS="Ken S",e.ThomasS="Thomas S",e.TomS="Tom S",e.JackI="Jack i",e.TeddyI="Teddy i",e.ZachH="Zach H",e.ZakA="Zak Ben A",e.LoganR="Logan R",e.NathanW="Nathan W",e.ElizabethS="Elizabeth S",e.MeganW="Megan W",e.FrScott="Father Scott",e.JoeS="Joe S",e.SarahH="Sarah H",e.TylerM="Tyler M",e.RyanH="Ryan H",e.TheresaB="Theresa B",e.Unknown="n/a",e))(l||{}),p=(e=>(e.Alliance="Alliance Victory",e.Betrayed="Betrayed Defeat",e.Betrayal="Betrayal Victory",e.Defeat="Defeat",e.MultiAlliance="Multi Alliance Victory",e.PredictedDefeat="Predicted Defeat",e.SandTroutDefeat="Sand Trout Defeat",e.SandTroutSolo="Sand Trout Solo",e.SpecialBeneGesserit="Bene Gesserit Prediction",e.SpecialFremen="Fremen Special",e.SpecialSpacingGuild="Spacing Guild Special",e.TrueSolo="True Solo",e))(p||{});const D=["Alliance Victory","Betrayal Victory","Multi Alliance Victory","Sand Trout Solo","Bene Gesserit Prediction","Fremen Special","Spacing Guild Special","True Solo"],Y=T({data(){return{factionData:m.getFactions(),allGames:A.getAllGames()}},methods:{loadFactionData(e){const n=this.factionData.findIndex(t=>t.faction===e);n!==-1&&(this.factionData[n].data=G.getFactionStatistics(this.allGames,e),this.factionData[n].loaded=!0)},truncateAverageGameLength(e){return e===0?"n/a":(Math.round(e*Math.pow(10,2))/Math.pow(10,2)).toString()}}}),ee={class:"faction-content"},te={class:"panel-container"},ne={class:"icon-container"},ae=["src"];function se(e,n,t,s,c,h){return w(),U(X,{multiple:""},{default:a(()=>[r(I,null,{default:a(()=>[(w(!0),x(F,null,H(e.factionData,o=>(w(),U(K,{key:o.faction,cols:"6"},{default:a(()=>[r(L,{color:o.color,class:V({"choam-card":o.faction==="CHOAM"})},{default:a(()=>[g("div",ee,[g("div",te,[r(j,{title:o.faction,class:"transparent-panel h2-text",onClick:f=>o.loaded?null:e.loadFactionData(o.faction)},{default:a(()=>[r(q,{class:"panel-text"},{default:a(()=>[r(I,null,{default:a(()=>[r(v,null,{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(Math.round(o.data.usage_rate*100))+"%",1)]),_:2},1024),r(k,{class:"subtitle-text"},{default:a(()=>[_("Usage Rate")]),_:1})]),_:2},1024),r(v,null,{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(Math.round(o.data.win_rate*100))+"%",1)]),_:2},1024),r(k,{class:"subtitle-text"},{default:a(()=>[_("Win Rate")]),_:1})]),_:2},1024),r(v,null,{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(o.data.champion),1)]),_:2},1024),r(k,{class:"subtitle-text"},{default:a(()=>[_("Champion")]),_:1})]),_:2},1024),r(v,null,{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S("Turn: "+e.truncateAverageGameLength(o.data.average_game_length)),1)]),_:2},1024),r(k,{class:"subtitle-text"},{default:a(()=>[_("Average Game Length")]),_:1})]),_:2},1024),r(v,null,{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(o.data.adversary),1)]),_:2},1024),r(k,{class:"subtitle-text"},{default:a(()=>[_("Adversary")]),_:1})]),_:2},1024),r(v,null,{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(o.data.rival_house),1)]),_:2},1024),r(k,{class:"subtitle-text"},{default:a(()=>[_("Rival House")]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","onClick"])]),g("div",ne,[g("img",{src:o.image_url,class:"faction-icon"},null,8,ae)])])]),_:2},1032,["color","class"])]),_:2},1024))),128))]),_:1})]),_:1})}const re=P(Y,[["render",se],["__scopeId","data-v-22812962"]]),ie=T({data(){return{searchQuery:"",peopleData:C.getPeople(),selectedPerson:new C(l.Unknown),allGames:A.getAllGames()}},mounted(){const e=this.peopleData.findIndex(n=>n.person==="n/a");this.peopleData[e].data=G.getPersonStatistics(this.allGames,this.peopleData[e].person),this.selectedPerson=this.peopleData[e]},computed:{filteredPlayers(){const e=this.peopleData.filter(n=>n.person.toLowerCase().includes(this.searchQuery.toLowerCase()));return e.length<Object.values(l).length?e:[]}},methods:{searchPlayer(e){const n=this.peopleData.find(t=>t.person===e);if(n===void 0){const t=this.peopleData.findIndex(s=>s.person==="n/a");this.selectedPerson=this.peopleData[t]}else{const t=this.peopleData.findIndex(s=>s.person.includes(n.person));t!==-1?this.peopleData[t].loaded?this.selectedPerson===this.peopleData[t]?this.clearSearch():(this.selectedPerson=this.peopleData[t],this.searchQuery=this.peopleData[t].person):(this.peopleData[t].data=G.getPersonStatistics(this.allGames,this.peopleData[t].person),this.peopleData[t].loaded=!0,this.selectedPerson=this.peopleData[t],this.searchQuery=this.peopleData[t].person):this.clearSearch()}},clearSearch(){this.searchQuery="";const e=this.peopleData.findIndex(n=>n.person==="n/a");this.selectedPerson=this.peopleData[e]},truncateAverageGameLength(e){return e===0?"n/a":(Math.round(e*Math.pow(10,2))/Math.pow(10,2)).toString()}}}),oe={class:"search-panel"},le={key:0},ce={key:0},de={key:0},ue={class:"selected-person"};function he(e,n,t,s,c,h){return w(),U(L,{class:"player-card h2-text"},{default:a(()=>[g("div",oe,[N(g("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=o=>e.searchQuery=o),placeholder:"Search player..."},null,512),[[z,e.searchQuery]]),e.selectedPerson?(w(),x("div",le,[e.filteredPlayers.length>0?(w(),x("div",ce,[r(I,null,{default:a(()=>[(w(!0),x(F,null,H(e.filteredPlayers,o=>(w(),U(L,{class:"filtered-person h2-text",key:o.person,onClick:f=>e.searchPlayer(o.person)},{default:a(()=>[e.selectedPerson.person!=="n/a"&&e.searchQuery!==""?(w(),x("button",de," X ")):b("",!0),r(v,null,{default:a(()=>[r(y,null,{default:a(()=>[_(S(o.person),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):b("",!0)])):b("",!0)]),g("div",ue,[r(I,null,{default:a(()=>[r(v,null,{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(e.selectedPerson.data.usage_rate),1)]),_:1}),r(k,{class:"subtitle-text"},{default:a(()=>[_("Number of Games")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(w(),U(v,{key:0},{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(Math.round(e.selectedPerson.data.win_rate*100))+"%",1)]),_:1}),r(k,{class:"subtitle-text"},{default:a(()=>[_("Win Rate")]),_:1})]),_:1})):b("",!0),r(v,null,{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(e.selectedPerson.data.champion),1)]),_:1}),r(k,{class:"subtitle-text"},{default:a(()=>[_("Best Faction")]),_:1})]),_:1}),r(v,null,{default:a(()=>[r(y,{class:"truncate-decimal"},{default:a(()=>[g("div",null,S("Turn: "+e.truncateAverageGameLength(e.selectedPerson.data.average_game_length)),1)]),_:1}),r(k,{class:"subtitle-text"},{default:a(()=>[_("Average Game Length")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(w(),U(v,{key:1},{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(e.selectedPerson.data.adversary),1)]),_:1}),r(k,{class:"subtitle-text"},{default:a(()=>[_("Adversary")]),_:1})]),_:1})):b("",!0),e.selectedPerson.person!=="n/a"?(w(),U(v,{key:2},{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(e.selectedPerson.data.rival_house),1)]),_:1}),r(k,{class:"subtitle-text"},{default:a(()=>[_("Rival House")]),_:1})]),_:1})):b("",!0),e.selectedPerson.person==="n/a"?(w(),U(v,{key:3},{default:a(()=>[r(y,null,{default:a(()=>[g("div",null,S(e.selectedPerson.data.seat_rates),1)]),_:1}),r(k,{class:"subtitle-text"},{default:a(()=>[_("Seat Win Rate")]),_:1})]),_:1})):b("",!0)]),_:1})])]),_:1})}const fe=P(ie,[["render",he],["__scopeId","data-v-0890b772"]]),pe=T({components:{FactionStatistics:re,SearchPanel:fe}}),O=e=>(J("data-v-014fcabe"),e=e(),Z(),e),ge={class:"default-page"},me={class:"dune-box"},we=O(()=>g("h2",{class:"h2-text"}," Player Standings ",-1)),Se=O(()=>g("h2",{class:"h2-text"}," House Standings ",-1));function _e(e,n,t,s,c,h){const o=$("SearchPanel"),f=$("FactionStatistics");return w(),x("div",ge,[g("div",me,[r(I,{class:"centered-row"},{default:a(()=>[we,r(o),Se,r(f)]),_:1})])])}const Ae=P(pe,[["render",_e],["__scopeId","data-v-014fcabe"]]);export{Ae as default};
