var V=Object.defineProperty;var T=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>(T(e,typeof t!="symbol"?t+"":t,n),n);import{F as d}from"./Factions-d3b9fb41.js";import{D as R}from"./Expansions-0123850c.js";import{d as F,_ as $,o as m,c as P,w as a,a as o,b as x,F as L,r as H,n as W,e as f,t as v,f as w,g as N,v as O,h as b,i as B,p as Z,j}from"./index-fe7e4601.js";import{V as M,a as z,b as J,c as K,d as S,e as y,f as k,g as X}from"./VListItem-d6eaa387.js";import{V as C}from"./VCard-06fd959a.js";class g{constructor(t,n,s){u(this,"faction");u(this,"loaded");u(this,"color");u(this,"image_url");u(this,"data");this.faction=t,this.loaded=!1,this.color=n,this.image_url=s,this.data=new A(t,p.Unknown,0,0,p.Unknown,0,p.Unknown,d.Unknown,[])}static getFactions(){return[new g(d.Atreides,"rgba( 0, 255, 0, 0.05 )",new URL("/assets/Atreides-559fab5c.png",self.location).href),new g(d.BeneGesserit,"rgba( 0, 0, 255, 0.05 )",new URL("/assets/BeneGesserit-a70f6147.png",self.location).href),new g(d.Emperor,"rgba( 255, 0, 0, 0.05 )",new URL("/assets/Emperor-e85c38c2.png",self.location).href),new g(d.Fremen,"rgba( 255, 255, 0, 0.05 )",new URL("/assets/Fremen-bedc8e68.png",self.location).href),new g(d.Harkonnen,"rgba( 0, 0, 0, 0.05 )",new URL("/assets/Harkonnen-8980669d.png",self.location).href),new g(d.SpacingGuild,"rgba( 255, 110, 0, 0.05 )",new URL("/assets/SpacingGuild-1948f1ca.png",self.location).href),new g(d.Ixians,"rgba( 200, 190, 120, 0.05 )",new URL("/assets/Ixians-fd33647c.png",self.location).href),new g(d.Tleilaxu,"rgba( 130, 0, 200, 0.05 )",new URL("/assets/Tleilaxu-b169d45b.png",self.location).href),new g(d.CHOAM,"rgba( 0, 0, 0, 0 )",new URL("/assets/CHOAM-38777541.png",self.location).href),new g(d.Richese,"rgba( 255, 255, 255, 0.05 )",new URL("/assets/Richese-8e49c515.png",self.location).href),new g(d.Ecaz,"rgba( 200, 0, 130, 0.05 )",new URL("/assets/Ecaz-9fa8b699.png",self.location).href),new g(d.Moritani,"rgba( 0, 180, 255, 0.05 )",new URL("/assets/Moritani-97fc141c.png",self.location).href)]}}class A{constructor(t,n,s,c,r,l,h,D,Q){u(this,"faction");u(this,"person");u(this,"usage_rate");u(this,"win_rate");u(this,"champion");u(this,"average_game_length");u(this,"adversary");u(this,"rival_house");u(this,"seat_rates");this.faction=t,this.person=n,this.usage_rate=s,this.win_rate=c,this.champion=r,this.average_game_length=l,this.adversary=h,this.rival_house=D,this.seat_rates=Q}static getFactionStatistics(t,n){const s=t.filter(l=>l.players.find(h=>h.faction===n)),c=this.getFactionWins(s,n),r=this.getFactionDefeats(s,n);return new A(n,p.Unknown,(s.length||0)/(t.length||1),(c.length||0)/(s.length||1),this.getMaxPerson(c),(s.reduce((l,h)=>l+h.end_turn,0)||0)/(s.length||1),this.getMaxPerson(r),this.getMaxFaction(r),[])}static getPersonStatistics(t,n){if(n===p.Unknown)return this.getUnknownPersonStatistics(t);const s=t.filter(l=>l.players.find(h=>h.person===n)),c=this.getPersonWins(s,n),r=this.getPersonDefeats(s,n);return new A(d.Unknown,n,s.length,(c.length||0)/(s.length||1),this.getMaxFaction(c),(s.reduce((l,h)=>l+h.end_turn,0)||0)/(s.length||1),this.getMaxPerson(r),this.getMaxFaction(r),[])}static getUnknownPersonStatistics(t){return new A(d.Unknown,p.Unknown,t.length,0,this.getMaxFaction(t),(t.reduce((n,s)=>n+s.end_turn,0)||0)/(t.length||1),p.Unknown,d.Unknown,this.getSeatRates(t))}static getFactionWins(t,n){const s=[i.Alliance,i.MultiAlliance,i.Solo,i.SpecialFremen,i.SpecialSpacingGuild];return t.filter(c=>c.players.find(r=>s.includes(r.victory_type)&&r.faction===n))}static getFactionDefeats(t,n){const s=[i.Alliance,i.MultiAlliance,i.Solo,i.SpecialFremen,i.SpecialSpacingGuild];return t.filter(c=>c.players.find(r=>!s.includes(r.victory_type)&&r.faction===n))}static getMaxPerson(t){const n=[i.Alliance,i.MultiAlliance,i.Solo,i.SpecialFremen,i.SpecialSpacingGuild],s=[{person:p.Unknown,victories:0}];for(const c of t){const r=c.players.filter(l=>n.includes(l.victory_type));for(const l of r){const h=s.find(D=>D.person===l.person);h?h.victories++:s.push({person:l.person,victories:1})}}return s.reduce((c,r)=>r.victories>c.victories?r:c).person}static getMaxFaction(t){const n=[i.Alliance,i.MultiAlliance,i.Solo,i.SpecialFremen,i.SpecialSpacingGuild],s=[{faction:d.Unknown,victories:0}];for(const c of t){const r=c.players.filter(l=>n.includes(l.victory_type));for(const l of r){const h=s.find(D=>D.faction===l.faction);h?h.victories++:s.push({faction:l.faction,victories:1})}}return s.reduce((c,r)=>r.victories>c.victories?r:c).faction}static getPersonWins(t,n){const s=[i.Alliance,i.MultiAlliance,i.Solo,i.SpecialFremen,i.SpecialSpacingGuild];return t.filter(c=>c.players.find(r=>s.includes(r.victory_type)&&r.person===n))}static getPersonDefeats(t,n){const s=[i.Alliance,i.MultiAlliance,i.Solo,i.SpecialFremen,i.SpecialSpacingGuild];return t.filter(c=>c.players.find(r=>!s.includes(r.victory_type)&&r.person===n))}static getSeatRates(t){const n=[i.Alliance,i.MultiAlliance,i.Solo,i.SpecialFremen,i.SpecialSpacingGuild],s=[0,0,0,0,0,0];for(const c of t){const r=c.players.filter(l=>n.includes(l.victory_type));for(const l of r)s[l.seat_position-1]++}return s}}class U{constructor(t,n,s,c,r,l){u(this,"game_id");u(this,"end_turn");u(this,"players");u(this,"components");u(this,"duration");u(this,"location");this.game_id=t,this.end_turn=n,this.players=s,this.components=c,this.duration=r,this.location=l}static getGameByGameId(t){const n=this.getAllGames().find(s=>s.game_id===t);return n||new U(-1,-1,[],[],-1,G.Unknown)}static getGamesByLocation(t){return this.getAllGames().filter(n=>n.location===t)}static getGamesByNumberOfPlayers(t){return this.getAllGames().filter(n=>n.players.length===t)}static getAllGames(){return[new U(0,10,_.getPlayersByGameId(0),R.getComponentsByQuery([],[4,11,15]),8,G.Chicago),new U(1,5,_.getPlayersByGameId(1),R.getComponentsByQuery([2,51],[]),3,G.Chicago)]}}class I{constructor(t){u(this,"person");u(this,"loaded");u(this,"data");this.person=t,this.loaded=!1,this.data=new A(d.Unknown,p.Unknown,0,0,p.Unknown,0,p.Unknown,d.Unknown,[])}static getPeople(){const t=[];for(const n of Object.values(p))t.push(new I(n));return t}}class _{constructor(t,n,s,c,r){u(this,"person");u(this,"game_id");u(this,"faction");u(this,"seat_position");u(this,"victory_type");this.game_id=t,this.seat_position=n,this.person=s,this.faction=c,this.victory_type=r}static getPlayersByGameId(t){return this.getAllPlayers().filter(n=>n.game_id===t)}static getPlayersByPersonId(t){return this.getAllPlayers().filter(n=>n.person===t)}static getAllPlayers(){return[new _(0,1,p.ThomasS,d.Moritani,i.Defeat),new _(0,2,p.ChrisS,d.Harkonnen,i.Solo),new _(0,3,p.AmandaS,d.Fremen,i.Defeat),new _(0,4,p.TomS,d.Emperor,i.Defeat),new _(0,5,p.AliciaS,d.Atreides,i.Defeat),new _(0,6,p.KenS,d.SpacingGuild,i.Defeat),new _(1,1,p.JackI,d.SpacingGuild,i.Alliance),new _(1,2,p.Zak,d.Atreides,i.Defeat),new _(1,3,p.Teddy,d.Fremen,i.Alliance),new _(1,4,p.Zach,d.BeneGesserit,i.Defeat),new _(1,5,p.Logan,d.Harkonnen,i.Defeat)]}}var G=(e=>(e.Lincoln="Lincoln, NE",e.Chicago="Chicago, IL",e.Madison="Madison, WI",e.Unknown="Unknown",e))(G||{}),p=(e=>(e.AliciaS="Alicia S",e.AmandaS="Amanda S",e.ChrisS="Chris S",e.KenS="Ken S",e.ThomasS="Thomas S",e.TomS="Tom S",e.JackI="Jack i",e.Teddy="Teddy i",e.Zach="Zach H",e.Zak="Zak Ben A",e.Logan="Logan R",e.Unknown="n/a",e))(p||{}),i=(e=>(e.Alliance="Alliance",e.BetrayedDefeat="Betrayed Defeat",e.BetrayalVictory="Betrayal Victory",e.Defeat="Defeat",e.MultiAlliance="MultiAlliance",e.PredictedDefeat="Predicted Defeat",e.Solo="Solo",e.SpecialBeneGesserit="Special Bene Gesserit",e.SpecialFremen="Special Fremen",e.SpecialSpacingGuild="Special Spacing Guild",e))(i||{});const q=F({data(){return{factionData:g.getFactions(),allGames:U.getAllGames()}},methods:{loadFactionData(e){const t=this.factionData.findIndex(n=>n.faction===e);t!==-1&&(this.factionData[t].data=A.getFactionStatistics(this.allGames,e),this.factionData[t].loaded=!0)}}});const Y={class:"faction-content"},ee={class:"panel-container"},te={class:"icon-container"},ne=["src"];function ae(e,t,n,s,c,r){return m(),P(X,{multiple:""},{default:a(()=>[o(M,null,{default:a(()=>[(m(!0),x(L,null,H(e.factionData,l=>(m(),P(z,{key:l.faction,cols:"6"},{default:a(()=>[o(C,{color:l.color,class:W({"choam-card":l.faction==="CHOAM"})},{default:a(()=>[f("div",Y,[f("div",ee,[o(J,{title:l.faction,class:"transparent-panel h2-text",onClick:h=>l.loaded?null:e.loadFactionData(l.faction)},{default:a(()=>[o(K,{class:"panel-text"},{default:a(()=>[o(M,null,{default:a(()=>[o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(Math.round(l.data.usage_rate*100))+"%",1)]),_:2},1024),o(k,{class:"subtitle-text"},{default:a(()=>[w("Usage Rate")]),_:1})]),_:2},1024),o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(Math.round(l.data.win_rate*100))+"%",1)]),_:2},1024),o(k,{class:"subtitle-text"},{default:a(()=>[w("Win Rate")]),_:1})]),_:2},1024),o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(l.data.champion),1)]),_:2},1024),o(k,{class:"subtitle-text"},{default:a(()=>[w("Champion")]),_:1})]),_:2},1024),o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(l.data.average_game_length!==0?"Turn "+l.data.average_game_length:"n/a"),1)]),_:2},1024),o(k,{class:"subtitle-text"},{default:a(()=>[w("Average Game Length")]),_:1})]),_:2},1024),o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(l.data.adversary),1)]),_:2},1024),o(k,{class:"subtitle-text"},{default:a(()=>[w("Adversary")]),_:1})]),_:2},1024),o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(l.data.rival_house),1)]),_:2},1024),o(k,{class:"subtitle-text"},{default:a(()=>[w("Rival House")]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","onClick"])]),f("div",te,[f("img",{src:l.image_url,class:"faction-icon"},null,8,ne)])])]),_:2},1032,["color","class"])]),_:2},1024))),128))]),_:1})]),_:1})}const se=$(q,[["render",ae],["__scopeId","data-v-11068212"]]),le=F({data(){return{searchQuery:"",peopleData:I.getPeople(),selectedPerson:new I(p.Unknown),allGames:U.getAllGames()}},mounted(){const e=this.peopleData.findIndex(t=>t.person==="n/a");this.peopleData[e].data=A.getPersonStatistics(this.allGames,this.peopleData[e].person),this.selectedPerson=this.peopleData[e]},computed:{filteredPlayers(){const e=this.peopleData.filter(t=>t.person.toLowerCase().includes(this.searchQuery.toLowerCase()));return e.length<Object.values(p).length?e:[]}},methods:{searchPlayer(e){const t=this.peopleData.find(n=>n.person===e);if(t===void 0){const n=this.peopleData.findIndex(s=>s.person==="n/a");this.selectedPerson=this.peopleData[n]}else{const n=this.peopleData.findIndex(s=>s.person.includes(t.person));n!==-1?this.peopleData[n].loaded?this.selectedPerson===this.peopleData[n]?this.clearSearch():(this.selectedPerson=this.peopleData[n],this.searchQuery=this.peopleData[n].person):(this.peopleData[n].data=A.getPersonStatistics(this.allGames,this.peopleData[n].person),this.peopleData[n].loaded=!0,this.selectedPerson=this.peopleData[n],this.searchQuery=this.peopleData[n].person):this.clearSearch()}},clearSearch(){this.searchQuery="";const e=this.peopleData.findIndex(t=>t.person==="n/a");this.selectedPerson=this.peopleData[e]}}});const ie={class:"search-panel"},oe={key:0},re={key:0},ce={key:0},de={class:"selected-person"};function ue(e,t,n,s,c,r){return m(),P(C,{class:"player-card h2-text"},{default:a(()=>[f("div",ie,[N(f("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>e.searchQuery=l),placeholder:"Search player..."},null,512),[[O,e.searchQuery]]),e.selectedPerson?(m(),x("div",oe,[e.filteredPlayers.length>0?(m(),x("div",re,[o(M,null,{default:a(()=>[(m(!0),x(L,null,H(e.filteredPlayers,l=>(m(),P(C,{class:"filtered-person h2-text",key:l.person,onClick:h=>e.searchPlayer(l.person)},{default:a(()=>[e.selectedPerson.person!=="n/a"&&e.searchQuery!==""?(m(),x("button",ce," X ")):b("",!0),o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[w(v(l.person),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):b("",!0)])):b("",!0)]),f("div",de,[o(M,null,{default:a(()=>[o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(e.selectedPerson.data.usage_rate),1)]),_:1}),o(k,{class:"subtitle-text"},{default:a(()=>[w("Number of Games")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(m(),P(S,{key:0},{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(Math.round(e.selectedPerson.data.win_rate*100))+"%",1)]),_:1}),o(k,{class:"subtitle-text"},{default:a(()=>[w("Win Rate")]),_:1})]),_:1})):b("",!0),o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(e.selectedPerson.data.champion),1)]),_:1}),o(k,{class:"subtitle-text"},{default:a(()=>[w("Best Faction")]),_:1})]),_:1}),o(S,null,{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(e.selectedPerson.data.average_game_length!==0?"Turn "+e.selectedPerson.data.average_game_length:"n/a"),1)]),_:1}),o(k,{class:"subtitle-text"},{default:a(()=>[w("Average Game Length")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(m(),P(S,{key:1},{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(e.selectedPerson.data.adversary),1)]),_:1}),o(k,{class:"subtitle-text"},{default:a(()=>[w("Adversary")]),_:1})]),_:1})):b("",!0),e.selectedPerson.person!=="n/a"?(m(),P(S,{key:2},{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(e.selectedPerson.data.rival_house),1)]),_:1}),o(k,{class:"subtitle-text"},{default:a(()=>[w("Rival House")]),_:1})]),_:1})):b("",!0),e.selectedPerson.person==="n/a"?(m(),P(S,{key:3},{default:a(()=>[o(y,null,{default:a(()=>[f("div",null,v(e.selectedPerson.data.seat_rates),1)]),_:1}),o(k,{class:"subtitle-text"},{default:a(()=>[w("Seat Win Rate")]),_:1})]),_:1})):b("",!0)]),_:1})])]),_:1})}const pe=$(le,[["render",ue],["__scopeId","data-v-e31a558f"]]),fe=F({components:{FactionStatistics:se,SearchPanel:pe}});const E=e=>(Z("data-v-014fcabe"),e=e(),j(),e),he={class:"default-page"},ge={class:"dune-box"},_e=E(()=>f("h2",{class:"h2-text"}," Player Standings ",-1)),me=E(()=>f("h2",{class:"h2-text"}," House Standings ",-1));function ve(e,t,n,s,c,r){const l=B("SearchPanel"),h=B("FactionStatistics");return m(),x("div",he,[f("div",ge,[o(M,{class:"centered-row"},{default:a(()=>[_e,o(l),me,o(h)]),_:1})])])}const be=$(fe,[["render",ve],["__scopeId","data-v-014fcabe"]]);export{be as default};
