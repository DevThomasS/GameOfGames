var W=Object.defineProperty;var Q=(e,n,t)=>n in e?W(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var u=(e,n,t)=>(Q(e,typeof n!="symbol"?n+"":n,t),t);import{F as o}from"./Factions-819d9094.js";import{D as I}from"./Expansions-0aeea0bd.js";import{d as T,_ as $,o as _,c as D,w as a,a as i,b as x,F as P,r as H,n as V,e as g,t as w,f as S,g as N,v as z,h as U,i as F,p as J,j as Z}from"./index-a11c8108.js";import{V as B,a as j,b as K,c as X,d as v,e as y,f as k,g as q}from"./VListItem-11bd8512.js";import{V as L}from"./VCard-df553ba0.js";class m{constructor(n,t,s){u(this,"faction");u(this,"loaded");u(this,"color");u(this,"image_url");u(this,"data");this.faction=n,this.loaded=!1,this.color=t,this.image_url=s,this.data=new G(n,l.Unknown,0,0,l.Unknown,0,l.Unknown,o.Unknown,[])}static getFactions(){return[new m(o.Atreides,"rgba( 0, 255, 0, 0.05 )",new URL("/GameOfGames/assets/Atreides-559fab5c.png",self.location).href),new m(o.BeneGesserit,"rgba( 0, 0, 255, 0.05 )",new URL("/GameOfGames/assets/BeneGesserit-a70f6147.png",self.location).href),new m(o.Emperor,"rgba( 255, 0, 0, 0.05 )",new URL("/GameOfGames/assets/Emperor-e85c38c2.png",self.location).href),new m(o.Fremen,"rgba( 255, 255, 0, 0.05 )",new URL("/GameOfGames/assets/Fremen-bedc8e68.png",self.location).href),new m(o.Harkonnen,"rgba( 0, 0, 0, 0.05 )",new URL("/GameOfGames/assets/Harkonnen-8980669d.png",self.location).href),new m(o.SpacingGuild,"rgba( 255, 110, 0, 0.05 )",new URL("/GameOfGames/assets/SpacingGuild-1948f1ca.png",self.location).href),new m(o.Ixians,"rgba( 200, 190, 120, 0.05 )",new URL("/GameOfGames/assets/Ixians-fd33647c.png",self.location).href),new m(o.Tleilaxu,"rgba( 130, 0, 200, 0.05 )",new URL("/GameOfGames/assets/Tleilaxu-b169d45b.png",self.location).href),new m(o.CHOAM,"rgba( 0, 0, 0, 0 )",new URL("/GameOfGames/assets/CHOAM-38777541.png",self.location).href),new m(o.Richese,"rgba( 255, 255, 255, 0.05 )",new URL("/GameOfGames/assets/Richese-8e49c515.png",self.location).href),new m(o.Ecaz,"rgba( 200, 0, 130, 0.05 )",new URL("/GameOfGames/assets/Ecaz-9fa8b699.png",self.location).href),new m(o.Moritani,"rgba( 0, 180, 255, 0.05 )",new URL("/GameOfGames/assets/Moritani-97fc141c.png",self.location).href)]}}class G{constructor(n,t,s,c,f,r,h,R,E){u(this,"faction");u(this,"person");u(this,"usage_rate");u(this,"win_rate");u(this,"champion");u(this,"average_game_length");u(this,"adversary");u(this,"rival_house");u(this,"seat_rates");this.faction=n,this.person=t,this.usage_rate=s,this.win_rate=c,this.champion=f,this.average_game_length=r,this.adversary=h,this.rival_house=R,this.seat_rates=E}static getFactionStatistics(n,t){const s=n.filter(r=>r.players.find(h=>h.faction===t)),c=this.getFactionWins(s,t),f=this.getFactionDefeats(s,t);return new G(t,l.Unknown,(s.length||0)/(n.length||1),(c.length||0)/(s.length||1),this.getMaxPerson(c),(s.reduce((r,h)=>r+h.end_turn,0)||0)/(s.length||1),this.getMaxPerson(f),this.getMaxFaction(f,l.Unknown),[])}static getPersonStatistics(n,t){if(t===l.Unknown)return this.getUnknownPersonStatistics(n);const s=n.filter(r=>r.players.find(h=>h.person===t)),c=this.getPersonWins(s,t),f=this.getPersonDefeats(s,t);return new G(o.Unknown,t,s.length,(c.length||0)/(s.length||1),this.getMaxFaction(c,t),(s.reduce((r,h)=>r+h.end_turn,0)||0)/(s.length||1),this.getMaxPerson(f),this.getMaxFaction(f,l.Unknown),[])}static getUnknownPersonStatistics(n){return new G(o.Unknown,l.Unknown,n.length,0,this.getMaxFaction(n,l.Unknown),(n.reduce((t,s)=>t+s.end_turn,0)||0)/(n.length||1),l.Unknown,o.Unknown,this.getSeatRates(n))}static getFactionWins(n,t){return n.filter(s=>s.players.find(c=>b.includes(c.victory_type)&&c.faction===t))}static getFactionDefeats(n,t){return n.filter(s=>s.players.find(c=>!b.includes(c.victory_type)&&c.faction===t))}static getMaxPerson(n){const t=[{person:l.Unknown,victories:0}];for(const s of n){const c=s.players.filter(f=>b.includes(f.victory_type));for(const f of c){const r=t.find(h=>h.person===f.person);r?r.victories++:t.push({person:f.person,victories:1})}}return t.reduce((s,c)=>c.victories>s.victories?c:s).person}static getMaxFaction(n,t){const s=[{faction:o.Unknown,victories:0}];let c=s.find(r=>r.faction===o.Unknown),f=[];for(const r of n){t===l.Unknown?f=r.players.filter(h=>b.includes(h.victory_type)):f=r.players.filter(h=>b.includes(h.victory_type)&&h.person===t);for(const h of f)c=s.find(R=>R.faction===h.faction),c?c.victories++:s.push({faction:h.faction,victories:1})}return s.reduce((r,h)=>h.victories>r.victories?h:r).faction}static getPersonWins(n,t){return n.filter(s=>s.players.find(c=>b.includes(c.victory_type)&&c.person===t))}static getPersonDefeats(n,t){return n.filter(s=>s.players.find(c=>!b.includes(c.victory_type)&&c.person===t))}static getSeatRates(n){const t=[0,0,0,0,0,0];for(const s of n){const c=s.players.filter(f=>b.includes(f.victory_type));for(const f of c)t[f.seat_position-1]++}return t}}class A{constructor(n,t,s,c,f,r){u(this,"game_id");u(this,"end_turn");u(this,"players");u(this,"components");u(this,"duration");u(this,"location");this.game_id=n,this.end_turn=t,this.players=s,this.components=c,this.duration=f,this.location=r}static getGameByGameId(n){const t=this.getAllGames().find(s=>s.game_id===n);return t||new A(-1,-1,[],[],-1,M.Unknown)}static getGamesByLocation(n){return this.getAllGames().filter(t=>t.location===n)}static getGamesByNumberOfPlayers(n){return this.getAllGames().filter(t=>t.players.length===n)}static getAllGames(){return[new A(0,10,d.getPlayersByGameId(0),I.getComponentsByQuery([],[4,11,15]),8,M.Chicago),new A(1,5,d.getPlayersByGameId(1),I.getComponentsByQuery([2,51],[]),3,M.Chicago),new A(2,8,d.getPlayersByGameId(2),I.getComponentsByQuery([],[13]),9,M.Madison),new A(3,10,d.getPlayersByGameId(3),I.getComponentsByQuery([50],[]),8,M.Madison)]}}class C{constructor(n){u(this,"person");u(this,"loaded");u(this,"data");this.person=n,this.loaded=!1,this.data=new G(o.Unknown,l.Unknown,0,0,l.Unknown,0,l.Unknown,o.Unknown,[])}static getPeople(){const n=[];for(const t of Object.values(l))n.push(new C(t));return n}}class d{constructor(n,t,s,c,f){u(this,"person");u(this,"game_id");u(this,"faction");u(this,"seat_position");u(this,"victory_type");this.game_id=n,this.seat_position=t,this.person=s,this.faction=c,this.victory_type=f}static getPlayersByGameId(n){return this.getAllPlayers().filter(t=>t.game_id===n)}static getPlayersByPersonId(n){return this.getAllPlayers().filter(t=>t.person===n)}static getAllPlayers(){return[new d(0,1,l.ThomasS,o.Moritani,p.Defeat),new d(0,2,l.ChrisS,o.Harkonnen,p.SandTroutSolo),new d(0,3,l.AmandaS,o.Fremen,p.Defeat),new d(0,4,l.TomS,o.Emperor,p.Defeat),new d(0,5,l.AliciaS,o.Atreides,p.Defeat),new d(0,6,l.KenS,o.SpacingGuild,p.Defeat),new d(1,1,l.JackI,o.SpacingGuild,p.Alliance),new d(1,2,l.ZakA,o.Atreides,p.Defeat),new d(1,3,l.TeddyI,o.Fremen,p.Alliance),new d(1,4,l.ZachH,o.BeneGesserit,p.Defeat),new d(1,5,l.LoganR,o.Harkonnen,p.Defeat),new d(2,1,l.ThomasS,o.Richese,p.Defeat),new d(2,2,l.ChrisS,o.BeneGesserit,p.Defeat),new d(2,3,l.NathanW,o.CHOAM,p.Defeat),new d(2,4,l.ElizabethS,o.Emperor,p.SandTroutSolo),new d(2,5,l.MeganW,o.Fremen,p.SandTroutDefeat),new d(2,6,l.AmandaS,o.Harkonnen,p.Defeat),new d(2,7,l.FrScott,o.SpacingGuild,p.Defeat),new d(2,8,l.JoeS,o.Moritani,p.Defeat),new d(3,1,l.ThomasS,o.Atreides,p.Defeat),new d(3,2,l.RyanH,o.Emperor,p.Defeat),new d(3,3,l.ChrisS,o.Harkonnen,p.SpecialSpacingGuild),new d(3,4,l.TheresaB,o.Tleilaxu,p.Defeat),new d(3,5,l.SarahH,o.SpacingGuild,p.SpecialSpacingGuild),new d(3,6,l.TylerM,o.Fremen,p.Defeat)]}}var M=(e=>(e.Lincoln="Lincoln, NE",e.Chicago="Chicago, IL",e.Madison="Madison, WI",e.Unknown="Unknown",e))(M||{}),l=(e=>(e.AliciaS="Alicia S",e.AmandaS="Amanda S",e.ChrisS="Chris S",e.KenS="Ken S",e.ThomasS="Thomas S",e.TomS="Tom S",e.JackI="Jack i",e.TeddyI="Teddy i",e.ZachH="Zach H",e.ZakA="Zak Ben A",e.LoganR="Logan R",e.NathanW="Nathan W",e.ElizabethS="Elizabeth S",e.MeganW="Megan W",e.FrScott="Father Scott",e.JoeS="Joe S",e.SarahH="Sarah H",e.TylerM="Tyler M",e.RyanH="Ryan H",e.TheresaB="Theresa B",e.Unknown="n/a",e))(l||{}),p=(e=>(e.Alliance="Alliance Victory",e.Betrayed="Betrayed Defeat",e.Betrayal="Betrayal Victory",e.Defeat="Defeat",e.MultiAlliance="Multi Alliance Victory",e.PredictedDefeat="Predicted Defeat",e.SandTroutDefeat="Sand Trout Defeat",e.SandTroutSolo="Sand Trout Solo",e.SpecialBeneGesserit="Bene Gesserit Prediction",e.SpecialFremen="Fremen Special",e.SpecialSpacingGuild="Spacing Guild Special",e.TrueSolo="True Solo",e))(p||{});const b=["Alliance Victory","Betrayal Victory","Multi Alliance Victory","Sand Trout Solo","Bene Gesserit Prediction","Fremen Special","Spacing Guild Special","True Solo"],Y=T({data(){return{factionData:m.getFactions(),allGames:A.getAllGames()}},methods:{loadFactionData(e){const n=this.factionData.findIndex(t=>t.faction===e);n!==-1&&(this.factionData[n].data=G.getFactionStatistics(this.allGames,e),this.factionData[n].loaded=!0)},truncateAverageGameLength(e){return e===0?"n/a":(Math.round(e*Math.pow(10,2))/Math.pow(10,2)).toString()}}});const ee={class:"faction-content"},te={class:"panel-container"},ne={class:"icon-container"},ae=["src"];function se(e,n,t,s,c,f){return _(),D(q,{multiple:""},{default:a(()=>[i(B,null,{default:a(()=>[(_(!0),x(P,null,H(e.factionData,r=>(_(),D(j,{key:r.faction,cols:"6"},{default:a(()=>[i(L,{color:r.color,class:V({"choam-card":r.faction==="CHOAM"})},{default:a(()=>[g("div",ee,[g("div",te,[i(K,{title:r.faction,class:"transparent-panel h2-text",onClick:h=>r.loaded?null:e.loadFactionData(r.faction)},{default:a(()=>[i(X,{class:"panel-text"},{default:a(()=>[i(B,null,{default:a(()=>[i(v,null,{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(Math.round(r.data.usage_rate*100))+"%",1)]),_:2},1024),i(k,{class:"subtitle-text"},{default:a(()=>[S("Usage Rate")]),_:1})]),_:2},1024),i(v,null,{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(Math.round(r.data.win_rate*100))+"%",1)]),_:2},1024),i(k,{class:"subtitle-text"},{default:a(()=>[S("Win Rate")]),_:1})]),_:2},1024),i(v,null,{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(r.data.champion),1)]),_:2},1024),i(k,{class:"subtitle-text"},{default:a(()=>[S("Champion")]),_:1})]),_:2},1024),i(v,null,{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w("Turn: "+e.truncateAverageGameLength(r.data.average_game_length)),1)]),_:2},1024),i(k,{class:"subtitle-text"},{default:a(()=>[S("Average Game Length")]),_:1})]),_:2},1024),i(v,null,{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(r.data.adversary),1)]),_:2},1024),i(k,{class:"subtitle-text"},{default:a(()=>[S("Adversary")]),_:1})]),_:2},1024),i(v,null,{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(r.data.rival_house),1)]),_:2},1024),i(k,{class:"subtitle-text"},{default:a(()=>[S("Rival House")]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","onClick"])]),g("div",ne,[g("img",{src:r.image_url,class:"faction-icon"},null,8,ae)])])]),_:2},1032,["color","class"])]),_:2},1024))),128))]),_:1})]),_:1})}const ie=$(Y,[["render",se],["__scopeId","data-v-22812962"]]),oe=T({data(){return{searchQuery:"",peopleData:C.getPeople(),selectedPerson:new C(l.Unknown),allGames:A.getAllGames()}},mounted(){const e=this.peopleData.findIndex(n=>n.person==="n/a");this.peopleData[e].data=G.getPersonStatistics(this.allGames,this.peopleData[e].person),this.selectedPerson=this.peopleData[e]},computed:{filteredPlayers(){const e=this.peopleData.filter(n=>n.person.toLowerCase().includes(this.searchQuery.toLowerCase()));return e.length<Object.values(l).length?e:[]}},methods:{searchPlayer(e){const n=this.peopleData.find(t=>t.person===e);if(n===void 0){const t=this.peopleData.findIndex(s=>s.person==="n/a");this.selectedPerson=this.peopleData[t]}else{const t=this.peopleData.findIndex(s=>s.person.includes(n.person));t!==-1?this.peopleData[t].loaded?this.selectedPerson===this.peopleData[t]?this.clearSearch():(this.selectedPerson=this.peopleData[t],this.searchQuery=this.peopleData[t].person):(this.peopleData[t].data=G.getPersonStatistics(this.allGames,this.peopleData[t].person),this.peopleData[t].loaded=!0,this.selectedPerson=this.peopleData[t],this.searchQuery=this.peopleData[t].person):this.clearSearch()}},clearSearch(){this.searchQuery="";const e=this.peopleData.findIndex(n=>n.person==="n/a");this.selectedPerson=this.peopleData[e]},truncateAverageGameLength(e){return e===0?"n/a":(Math.round(e*Math.pow(10,2))/Math.pow(10,2)).toString()}}});const re={class:"search-panel"},le={key:0},ce={key:0},de={key:0},ue={class:"selected-person"};function fe(e,n,t,s,c,f){return _(),D(L,{class:"player-card h2-text"},{default:a(()=>[g("div",re,[N(g("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=r=>e.searchQuery=r),placeholder:"Search player..."},null,512),[[z,e.searchQuery]]),e.selectedPerson?(_(),x("div",le,[e.filteredPlayers.length>0?(_(),x("div",ce,[i(B,null,{default:a(()=>[(_(!0),x(P,null,H(e.filteredPlayers,r=>(_(),D(L,{class:"filtered-person h2-text",key:r.person,onClick:h=>e.searchPlayer(r.person)},{default:a(()=>[e.selectedPerson.person!=="n/a"&&e.searchQuery!==""?(_(),x("button",de," X ")):U("",!0),i(v,null,{default:a(()=>[i(y,null,{default:a(()=>[S(w(r.person),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):U("",!0)])):U("",!0)]),g("div",ue,[i(B,null,{default:a(()=>[i(v,null,{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(e.selectedPerson.data.usage_rate),1)]),_:1}),i(k,{class:"subtitle-text"},{default:a(()=>[S("Number of Games")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(_(),D(v,{key:0},{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(Math.round(e.selectedPerson.data.win_rate*100))+"%",1)]),_:1}),i(k,{class:"subtitle-text"},{default:a(()=>[S("Win Rate")]),_:1})]),_:1})):U("",!0),i(v,null,{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(e.selectedPerson.data.champion),1)]),_:1}),i(k,{class:"subtitle-text"},{default:a(()=>[S("Best Faction")]),_:1})]),_:1}),i(v,null,{default:a(()=>[i(y,{class:"truncate-decimal"},{default:a(()=>[g("div",null,w("Turn: "+e.truncateAverageGameLength(e.selectedPerson.data.average_game_length)),1)]),_:1}),i(k,{class:"subtitle-text"},{default:a(()=>[S("Average Game Length")]),_:1})]),_:1}),e.selectedPerson.person!=="n/a"?(_(),D(v,{key:1},{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(e.selectedPerson.data.adversary),1)]),_:1}),i(k,{class:"subtitle-text"},{default:a(()=>[S("Adversary")]),_:1})]),_:1})):U("",!0),e.selectedPerson.person!=="n/a"?(_(),D(v,{key:2},{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(e.selectedPerson.data.rival_house),1)]),_:1}),i(k,{class:"subtitle-text"},{default:a(()=>[S("Rival House")]),_:1})]),_:1})):U("",!0),e.selectedPerson.person==="n/a"?(_(),D(v,{key:3},{default:a(()=>[i(y,null,{default:a(()=>[g("div",null,w(e.selectedPerson.data.seat_rates),1)]),_:1}),i(k,{class:"subtitle-text"},{default:a(()=>[S("Seat Win Rate")]),_:1})]),_:1})):U("",!0)]),_:1})])]),_:1})}const he=$(oe,[["render",fe],["__scopeId","data-v-0890b772"]]),pe=T({components:{FactionStatistics:ie,SearchPanel:he}});const O=e=>(J("data-v-014fcabe"),e=e(),Z(),e),ge={class:"default-page"},me={class:"dune-box"},_e=O(()=>g("h2",{class:"h2-text"}," Player Standings ",-1)),we=O(()=>g("h2",{class:"h2-text"}," House Standings ",-1));function Se(e,n,t,s,c,f){const r=F("SearchPanel"),h=F("FactionStatistics");return _(),x("div",ge,[g("div",me,[i(B,{class:"centered-row"},{default:a(()=>[_e,i(r),we,i(h)]),_:1})])])}const Ae=$(pe,[["render",Se],["__scopeId","data-v-014fcabe"]]);export{Ae as default};
